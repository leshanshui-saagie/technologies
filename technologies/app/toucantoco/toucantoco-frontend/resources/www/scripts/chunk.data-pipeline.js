(this.webpackJsonp=this.webpackJsonp||[]).push([["data-pipeline"],{"/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/dropdown-select/index.js":function(e,t,i){"use strict";var s=i("/app/node_modules/lodash/lodash.js"),o=i.n(s),n=i("/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/checkbox/index.coffee"),d=i("/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/utils/components/tc-dropdown/index.js"),a=i("/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/label/index.coffee"),l=i("/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/dropdown-select/template.vue.pug");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p=i.n(l)()({components:{TcDropdown:d.a,WidgetLabel:a.a,WidgetCheckbox:n.a},props:{defaultValue:{type:[Object,String,Number]},fieldName:{type:String},fieldNamePosition:{type:String,default:function(){return"top"}},labelSelector:{type:String},options:{type:Array,default:function(){return[]}},placeholder:{type:String,default:function(){return"Select..."}},required:{type:Boolean,default:function(){return!0}},tooltip:{type:String},value:{type:[Object,String,Number]},valueSelector:{type:String}},data:function(){return{error:null}},computed:{elementClass:function(){return r({"widget-dropdown-select--placeholder":!this.isPresent&&!this.required},"widget-dropdown-select--".concat(this.fieldNamePosition),!0)},extendedValue:function(){if(o.a.isUndefined(this.valueSelector))return this.value;var e=r({},this.valueSelector,this.value);return o.a.isUndefined(this.labelSelector)||(e[this.labelSelector]=this.value),e},isDeactivated:function(){return!this.required&&!this.isPresent},isLabeled:function(){return!o.a.isEmpty(this.fieldName)},isLabeledAndRequired:function(){return this.isLabeled&&this.required},isLabeledOrIsntRequired:function(){return this.isLabeled||!this.required},isPresent:function(){return!o.a.isUndefined(this.value)},valueOrPlaceholder:function(){return this.isPresent?this.value:this.placeholder}},created:function(){this.required&&this.defaultValue&&this.updateFormValue(this.defaultValue)},methods:{select:function(e){this.updateFormValue(e),this.$refs.dropdown.close()},togglePresence:function(){this.isPresent?this.updateFormValue(void 0):this.updateFormValue(o.a.defaultTo(this.defaultValue,o.a.isArray(this.options)?this.options[0]:void 0))},updateFormValue:function(e){this.$emit("input",e)}}});t.a=p},"/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/autocomplete/index.coffee":function(e,t,i){"use strict";var s,o=i("/app/node_modules/lodash/lodash.js"),n=i.n(o),d=i("/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/label/index.coffee"),a=i("/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/autocomplete/template.vue.pug");s=i.n(a)()({props:{defaultValue:{type:String},fieldName:{type:String},getSuggestions:{type:Function,default:function(){return[]}},placeholder:{type:String},required:{type:Boolean,default:function(){return!1}},tooltip:{type:String},value:{type:String,default:function(){return this.defaultValue}}},components:{WidgetLabel:d.a},data:function(){return{error:null,highlightedIndex:0,isFocused:!1,suggestions:[]}},computed:{elementClass:function(){return{"widget-autocomplete--focused":this.isFocused}},fieldModel:{get:function(){return this.value},set:function(e){return this.updateFormValue(e)}},isDeactivated:function(){return!this.isFocused&&!this.isPresent&&!this.isRequired},isLabeled:function(){return!n.a.isEmpty(this.fieldName)},isPresent:function(){return!n.a.isEmpty(this.value)},isRequired:function(){return this.required},suggestionsWithClass:function(){return n.a.map(this.suggestionsTemplate,(e=this,function(t,i){return{elementClass:{"widget-autocomplete__suggestion--highlighted":i===e.highlightedIndex},template:t}}));var e},suggestionsTemplate:function(){return n.a.isEmpty(this.value)?n.a.map(this.suggestions,"value"):n.a.map(this.suggestions,(e=this,function(t,i){return e.getTemplate(t.value)}));var e}},methods:{blur:function(){return this.isFocused=!1},focus:function(e){return null==e&&(e=!1),e?this.$refs.field.focus():(this.updateSuggestions(),this.isFocused=!0)},getTemplate:function(e){var t,i,s,o;return i=n.a.toLower(e),s=n.a.toLower(this.value),-1===(o=i.indexOf(s))?e:(t=o+n.a.size(this.value),e.slice(0,o)+"<strong>"+e.slice(o,t)+"</strong>"+e.slice(t))},highlight:function(e){return this.highlightedIndex=e},highlightNext:function(){var e;if(!n.a.isEmpty(this.suggestions))return e=n.a.add(this.highlightedIndex,1),this.highlight(n.a.lt(e,n.a.size(this.suggestions))?e:0)},highlightPrev:function(){var e;if(!n.a.isEmpty(this.suggestions))return e=n.a.subtract(this.highlightedIndex,1),this.highlight(n.a.gte(e,0)?e:n.a.chain(this.suggestions).size().subtract(1).value())},select:function(e){return this.updateFormValue(n.a.get(this.suggestions,"["+e+"].value")),this.$refs.field.blur()},selectHighlighted:function(){if(!n.a.isEmpty(this.suggestions))return this.select(this.highlightedIndex)},updateFormValue:function(e){return this.$emit("input",n.a.isEmpty(e)?void 0:e)},updateSuggestions:function(){var e,t,i;return i=this.getSuggestions(this.value),0!==this.highlightedIndex&&(e=n.a.get(this.suggestions,"["+this.highlightedIndex+"].value"),t=n.a.findIndex(i,function(t){return t.value===e}),this.highlightedIndex=-1===t?0:t),this.suggestions=i}},watch:{value:function(){return this.updateSuggestions()}}}),t.a=s},"/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/checkbox/index.coffee":function(e,t,i){"use strict";var s,o=i("/app/node_modules/lodash/lodash.js"),n=i.n(o),d=i("/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/label/index.coffee"),a=i("/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/checkbox/template.vue.pug");s=i.n(a)()({props:{defaultValue:{type:Boolean,default:function(){return!1}},fieldName:{type:String},tooltip:{type:String},value:{type:Boolean,default:function(){return this.defaultValue}}},components:{WidgetLabel:d.a},computed:{elementClass:function(){return{"widget-checkbox--checked":this.value}},isLabeled:function(){return!n.a.isEmpty(this.fieldName)}},methods:{updateFormValue:function(){return this.$emit("input",!this.value)}}}),t.a=s},"/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/label/index.coffee":function(e,t,i){"use strict";var s,o=i("/app/node_modules/lodash/lodash.js"),n=i.n(o),d=i("/app/node_modules/v-tooltip/dist/v-tooltip.esm.js"),a=i("/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/label/template.vue.pug");s=i.n(a)()({directives:{tooltip:d.a},name:"widget-label",props:{position:{type:String,default:function(){return"top"},validator:function(e){return n.a.includes(["top","left","center"],e)}},fieldName:{type:String},tooltip:{type:String}},computed:{tooltipParameters:function(){return{content:this.tooltip,autoHide:!1}},positionClass:function(){return{"widget-label--above":"top"===this.position,"widget-label--left":"left"===this.position}},isToolTiped:function(){return!n.a.isEmpty(this.tooltip)}}}),t.a=s},"/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/data-pipeline-sheet/index.coffee d05dce2b5a7e5e2c1c78226396020b09":function(e,t,i){"use strict";i.r(t);var s,o=i("/app/node_modules/d3-graphviz/build/d3-graphviz.js"),n=i("/app/node_modules/lodash/lodash.js"),d=i.n(n),a=i("/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/api/index.coffee 7b8e1a233c3e46c37448787210f252a9"),l=i("/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/dropdown-select/index.js"),r=i("/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/autocomplete/index.coffee"),p={name:"DataPipeline",components:{DropdownSelect:l.a,WidgetAutocomplete:r.a},props:{slideId:{type:Number,default:void 0}},data:function(){return{allViewIds:{},allViewTypes:["whole pipeline","domain","slide","report","dashboard"],dotSource:void 0,selectedViewType:this.slideId?"slide":"whole pipeline",typedId:this.slideId||""}},computed:{allPossibleViewIds:function(){if(!this.isWholePipeline)return this.allViewIds[this.selectedViewType]},currentViewId:function(){return d.a.get(this.suggestedViewIds,"[0]",this.typedId)},displayTypeDropdown:function(){return null==this.slideId},displayIdDropdown:function(){return!this.isWholePipeline&&null==this.slideId},isWholePipeline:function(){return"whole pipeline"===this.selectedViewType},suggestedViewIds:function(){var e=this;return d.a.filter(this.allPossibleViewIds,function(t){return d.a.includes(t,e.typedId||"")})},viewType:function(){if(!this.isWholePipeline)return this.selectedViewType}},mounted:function(){return this.runRequest()},methods:{getPossibleViewIds:function(){return d.a.map(this.suggestedViewIds,function(e){return{value:e}})},render:function(){var e=this.$refs.viz.offsetHeight,t=this.$refs.viz.offsetWidth,i=!0,s=!1,n=void 0;try{for(var d,a=this.$refs.viz.children[Symbol.iterator]();!(i=(d=a.next()).done);i=!0){d.value.remove()}}catch(e){s=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw n}}var l=document.createElement("div");return this.$refs.viz.appendChild(l),o.graphviz(l,{zoom:!0,width:t,height:e,fit:!0}).renderDot(this.dotSource)},runRequest:function(){var e=this;return a.a.smallApp.data.pipeline(this.$store.getters.smallAppId,this.viewType,this.currentViewId,this.$store.getters.stage).then(function(t){return t.metadata&&(e.allViewIds={domain:t.metadata.domains,slide:t.metadata.slides,report:t.metadata.reports,dashboard:t.metadata.dashboards},d.a.forEach(e.allViewIds,function(t,i){return e.allViewIds[i]=d.a.sortBy(t,[function(e){return e.toString().toLowerCase()}])})),e.dotSource=t.dot,e.render()})},updateViewType:function(e){return this.selectedViewType=e,this.typedId=this.suggestedViewIds?this.suggestedViewIds[0]:void 0,this.runRequest()},updateViewId:function(e){return this.typedId=e,this.runRequest()}}},u=(i("/app/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/app/node_modules/mini-css-extract-plugin/dist/loader.js!/app/node_modules/css-loader/dist/cjs.js!/app/node_modules/resolve-url-loader/index.js!/app/node_modules/postcss-loader/src/index.js??ref--8-3!/app/node_modules/sass-loader/dist/cjs.js??ref--8-4!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/app/scripts/studio/data-pipeline/index.vue?vue&type=style&index=0&lang=scss&"),i("/app/node_modules/vue-loader/lib/runtime/componentNormalizer.js")),c=Object(u.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"data-pipeline"},[e.displayTypeDropdown?i("DropdownSelect",{staticClass:"data-pipeline__dropdown-type",attrs:{value:e.selectedViewType,"field-name":"Select the view type",options:e.allViewTypes},on:{input:e.updateViewType}}):e._e(),e._v(" "),e.displayIdDropdown?i("WidgetAutocomplete",{staticClass:"data-pipeline__dropdown-id",attrs:{value:e.typedId,"field-name":"Select the "+e.selectedViewType,"get-suggestions":e.getPossibleViewIds},on:{input:e.updateViewId}}):e._e(),e._v(" "),i("div",{ref:"viz",staticClass:"viz-container"})],1)},[],!1,null,null,null).exports,f=i("/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/utils/tc-sheet/index.js"),h=i("/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/data-pipeline-sheet/data-pipeline-sheet.vue.pug");s=i.n(h)()({components:{DataPipeline:c,TcSheet:f.default},props:{slideId:{type:Number,default:function(){}}},methods:{close:function(){return this.$emit("closed")}}});t.default=s},"/app/node_modules/mini-css-extract-plugin/dist/loader.js!/app/node_modules/css-loader/dist/cjs.js!/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js!/app/node_modules/resolve-url-loader/index.js!/app/node_modules/postcss-loader/src/index.js??ref--8-3!/app/node_modules/sass-loader/dist/cjs.js??ref--8-4!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/app/scripts/studio/data-pipeline/index.vue?vue&type=style&index=0&lang=scss&":function(e,t,i){},"/app/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/app/node_modules/mini-css-extract-plugin/dist/loader.js!/app/node_modules/css-loader/dist/cjs.js!/app/node_modules/resolve-url-loader/index.js!/app/node_modules/postcss-loader/src/index.js??ref--8-3!/app/node_modules/sass-loader/dist/cjs.js??ref--8-4!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/app/scripts/studio/data-pipeline/index.vue?vue&type=style&index=0&lang=scss&":function(e,t,i){"use strict";var s=i("/app/node_modules/mini-css-extract-plugin/dist/loader.js!/app/node_modules/css-loader/dist/cjs.js!/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js!/app/node_modules/resolve-url-loader/index.js!/app/node_modules/postcss-loader/src/index.js??ref--8-3!/app/node_modules/sass-loader/dist/cjs.js??ref--8-4!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/app/scripts/studio/data-pipeline/index.vue?vue&type=style&index=0&lang=scss&");i.n(s).a},"/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/autocomplete/template.vue.pug":function(e,t){var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"widget-autocomplete",class:e.elementClass},[e.isLabeled?i("widget-label",{attrs:{"field-name":e.fieldName,tooltip:e.tooltip},on:{click:function(t){return e.focus(!0)}}}):e._e(),i("div",{staticClass:"widget-autocomplete__body"},[i("div",{staticClass:"widget-autocomplete__field-container",on:{click:function(t){return e.focus(!0)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldModel,expression:"fieldModel"}],ref:"field",staticClass:"widget-autocomplete__field",attrs:{autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.fieldModel},on:{blur:function(t){return e.blur()},focus:function(t){return e.focus()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.highlightNext()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.selectHighlighted()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.highlightPrev()}],input:function(t){t.target.composing||(e.fieldModel=t.target.value)}}}),i("div",{staticClass:"far fa-angle-down widget-autocomplete__icon"})]),i("div",{staticClass:"widget-autocomplete__suggestions"},e._l(e.suggestionsWithClass,function(t,s){return i("div",{staticClass:"widget-autocomplete__suggestion",class:t.elementClass,domProps:{innerHTML:e._s(t.template)},on:{click:function(t){return e.select(s)},mouseenter:function(t){return e.highlight(s)}}})}),0)])],1)},s=[];e.exports=function(e){var t="function"==typeof e?e.options:e;return t.render=i,t.staticRenderFns=s,e}},"/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/checkbox/template.vue.pug":function(e,t){var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"widget-checkbox",class:e.elementClass,on:{click:function(t){return e.updateFormValue()}}},[e.isLabeled?i("widget-label",{staticClass:"widget-checkbox__label",attrs:{"field-name":e.fieldName,position:"center",tooltip:e.tooltip}}):e._e()],1)},s=[];e.exports=function(e){var t="function"==typeof e?e.options:e;return t.render=i,t.staticRenderFns=s,e}},"/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/dropdown-select/template.vue.pug":function(e,t){var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"widget-dropdown-select",class:e.elementClass},[e.isLabeledOrIsntRequired?i("div",{staticClass:"widget-dropdown-select__header"},[e.required?i("widget-label",{staticClass:"widget-dropdown-select__label",attrs:{"field-name":e.fieldName,position:e.fieldNamePosition,tooltip:e.tooltip}}):i("widget-checkbox",{staticClass:"widget-dropdown-select__checkbox",attrs:{"field-name":e.fieldName,tooltip:e.tooltip,value:e.isPresent},on:{input:function(t){return e.togglePresence()}}})],1):e._e(),i("tc-dropdown",{ref:"dropdown",staticClass:"widget-dropdown-select__body",attrs:{"no-search":"",theme:"form","label-selector":e.labelSelector,options:e.options,value:e.extendedValue,"value-selector":e.valueSelector},on:{selected:function(t){return e.select(t)}},scopedSlots:e._u([{key:"display",fn:function(){return[i("div",{staticClass:"widget-dropdown-select__field"},[e._t("element",[e._v(e._s(e.valueOrPlaceholder))],{originalOption:e.valueOrPlaceholder})],2),i("div",{staticClass:"far fa-angle-down tc-dropdown__icon"})]},proxy:!0},{key:"option",fn:function(t){return[e._t("element",[e._v(e._s(t.label))],null,t)]}}],null,!0)})],1)},s=[];e.exports=function(e){var t="function"==typeof e?e.options:e;return t.render=i,t.staticRenderFns=s,e}},"/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/chart-options-editor/form-builder/widgets/label/template.vue.pug":function(e,t){var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"widget-label",class:this.positionClass},[t("div",{staticClass:"widget-label__text"},[this._v(this._s(this.fieldName))]),this.isToolTiped?t("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:this.tooltipParameters,expression:"tooltipParameters"}],staticClass:"widget-label__icon fa fa-question-circle"}):this._e()])},s=[];e.exports=function(e){var t="function"==typeof e?e.options:e;return t.render=i,t.staticRenderFns=s,e}},"/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/data-pipeline-sheet/data-pipeline-sheet.vue.pug":function(e,t,i){var s=function(){var e=this.$createElement,t=this._self._c||e;return t("tc-sheet",{on:{closed:this.close}},[t("template",{slot:"header"},[t("div",{staticClass:"studio-header__title"},[this._v("Data pipeline")])]),t("data-pipeline",{attrs:{slideId:this.slideId}}),this._e()],2)},o=[];e.exports=function(e){var t="function"==typeof e?e.options:e;return t.render=s,t.staticRenderFns=o,e}},"ignored /app/node_modules/viz.js crypto":function(e,t){},"ignored /app/node_modules/viz.js fs":function(e,t){},"ignored /app/node_modules/viz.js path":function(e,t){}}]);