(this.webpackJsonp=this.webpackJsonp||[]).push([["data-pipeline~tc-sheet"],{"/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/chart-options-editor/json-to-ui-schema.js":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n("/app/node_modules/lodash/lodash.js"),r=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={LIST:{widget:"list",attrs:{item:{}}},TEXT:{widget:"input",attrs:{type:"text"}},NUMBER:{widget:"input",attrs:{type:"number"}},CHECKBOX:{widget:"checkbox"},SWITCH:{widget:"switch",attrs:{choices:["on","off"]}},DROPDOWN:{widget:"dropdown",attrs:{type:"select",options:[]}},MULTIPLE_CHECKBOXES:{widget:"multipleCheckboxes",attrs:{choices:[]}},GROUP:{widget:"group",children:[]},AUTOCOMPLETE:{widget:"autocomplete"},RADIO_BUTTONS:{widget:"radioButtons",attrs:{choices:[]}},MULTIPLE_BRANCHES:{widget:"multipleBranches",branches:[]},JSON:{widget:"json"}},a={MULTIPLE_BRANCHES:function(e){return{widget:"multipleBranches",branches:e.map(function(e,t){return{label:r.a.get(e,"ui.case")||"Type ".concat(t+1),schema:e}})}}},c={boolean:i.CHECKBOX,string:i.TEXT,number:i.NUMBER,integer:i.NUMBER,array:i.LIST,object:i.GROUP,json:i.JSON};function l(e,t){var n,o;return void 0!==r.a.get(e,"ui.label")?n=e.ui.label:void 0!==e.title?n=e.title:(o=(o=t)||"",n=r.a.last(o.split("."))),n}function d(e,t,n,o){var p;if(!r.a.get(e,"ui.hidden")){var f=r.a.get(e,"oneOf")||r.a.get(e,"anyOf");if(f&&!r.a.has(e,"type")){var h=f.filter(function(e){return!r.a.get(e,"ui.hidden")});switch(h.length){case 0:return;case 1:e=h[0];break;default:p=a.MULTIPLE_BRANCHES(h),p=r.a.assign(p,e.ui)}}if("allOf"in e&&e.allOf.length&&(e=e.allOf[0]),"$ref"in e)try{e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=/^#\/definitions\/(.*)$/.exec(e);if(n&&n[1]&&n[1]in t)return t[n[1]];throw new Error("No definition found for $ref '".concat(e,"'"))}(e.$ref,o)}catch(e){console.error(e)}if(e.const&&(e.enum=[e.const]),r.a.get(e,"ui.widget")&&(p=e.ui),r.a.isArray(e.type)&&(e.type=e.type[0]),"object"===e.type&&r.a.isEmpty(e.properties)&&(e.type="json"),null==e.type&&e.enum&&(e.type=s(e.enum[0])),null==p&&null!=e.type&&c[e.type]){var m=r.a.cloneDeep(c[e.type]);e.enum?((m=r.a.cloneDeep(i.DROPDOWN)).attrs.options=e.enum,1===e.enum.length&&(m.attrs.defaultValue=e.enum[0])):r.a.has(e,"ui.suggestions")&&((m=r.a.cloneDeep(i.AUTOCOMPLETE)).attrs={suggestionsTypes:r.a.concat(e.ui.suggestions)});var v=e.ui||{};p=r.a.merge(m,v),null!=e.items&&(p.attrs.item=d(e.items,void 0,void 0,o));for(var b=0,g=["minItems","maxItems","writeOnly"];b<g.length;b++){var _=g[b];e[_]&&(p.attrs[_]=e[_])}}return null!=p?(p.attrs||(p.attrs={}),"radioButtons"===p.widget&&r.a.get(e,"enum.length")>1&&(p=r.a.merge(p,{attrs:{options:e.enum}})),r.a.has(e,"ui.enhancer")&&(p=r.a.merge(p,{attrs:{choices:n[e.ui.enhancer]}})),p.fieldName=l(e,t),"default"in e&&(p.attrs.defaultValue=e.default),"description"in e&&(p.attrs.tooltip=e.description),r.a.isArray(p.children)&&(p.children=u(e,t,void 0,n,o)),p):void 0}}function u(e,t,n,o,s){null==t&&(t=""),void 0===s&&(s=e.definitions);var a=[];return r.a.each(e.properties,function(c,l){var u=function(e,t){var n=(e=e||"")?".":"";return"".concat(e).concat(n).concat(t)}(t,l),p=d(c,u,o,s);if(p){(p=r.a.extend({attrs:{}},p,{path:u})).attrs.required=r.a.includes(e.required,l);var f=r.a.get(c,"ui.group");if(n&&f){if(r.a.isString(f)){if(!n[f]){var h=r.a.extend(r.a.cloneDeep(i.GROUP),{attrs:{fieldName:f}});n[f]=h,a.push(h)}!function(e,t){e.children.push(t),r.a.get(e,"optional")||null==t.optional||(e.optional=t.optional)}(n[f],p)}}else a.push(p)}}),a}t.b=function(e,t){null==t&&(t={}),e=r.a.cloneDeep(e);var n=[];"object"===r.a.get(e,"type")&&(n=(n=n.concat(u(e,"",{},t))).filter(function(e){return void 0!==e}));return n}},"/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/studio-toolbar/toolbar-links/index.js 06be0a3ba4c213eada90fde10577d579":function(e,t,n){"use strict";var o=n("/app/node_modules/vue-clickaway/dist/vue-clickaway.common.js"),r=n.n(o),s=n("/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/api/index.coffee 7b8e1a233c3e46c37448787210f252a9"),i=n("/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/chart-options-editor/json-to-ui-schema.js"),a=n("/app/node_modules/vue/dist/vue.common.js"),c=n.n(a);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,s=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d={namespaced:!0,state:{allConnectors:{},allStatuses:{},configs:[],uiSchemas:{}},getters:{allConnectors:function(e){return e.allConnectors},allStatuses:function(e){return e.allStatuses},configs:function(e){return e.configs},getConnectorInfos:function(e){return function(t,n){return{connectorConfig:t?e.configs.find(function(e){return e.id===t}).config:{type:n},uiSchema:e.uiSchemas[n].connector}}},getQueryInfos:function(e){return function(t,n){var o={},r=!0,s=!1,i=void 0;try{for(var a,c=e.configs[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value,d=l.id,u=l.config,p=l.queries;if(d===t){if(o.uiSchema=e.uiSchemas[u.type].query,o.connectorConfig=u,n){var f=!0,h=!1,m=void 0;try{for(var v,b=p[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var g=v.value,_=g.id,y=g.config;_===n&&(o.queryConfig=y)}}catch(e){h=!0,m=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw m}}}else o.queryConfig={};return o}}}catch(e){s=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(s)throw i}}}},uiSchemas:function(e){return e.uiSchemas}},mutations:{SET_ALL_CONNECTORS:function(e,t){e.allConnectors=t},SET_CONFIGS:function(e,t){e.configs=t},SET_STATUS:function(e,t){c.a.set(e.allStatuses,t.connectorId,t.status)},SET_UI_SCHEMAS:function(e,t){e.uiSchemas=t}},actions:{createConnector:function(e,t){var n=e.dispatch,o=e.rootGetters,r=t.config;return new Promise(function(e,t){s.a.connectors.createConnector(o.smallAppId,r).then(function(t){n("fetchConfigs").then(function(){e(t)})},function(e){t(e)})})},createQuery:function(e,t){var n=e.dispatch,o=e.rootGetters,r=t.connectorId,i=t.config;return new Promise(function(e,t){s.a.connectors.createQuery(o.smallAppId,r,i).then(function(t){n("fetchConfigs").then(function(){e(t)})},function(e){t(e)})})},deleteConnector:function(e,t){var n=e.dispatch,o=e.rootGetters,r=t.connectorId;s.a.connectors.deleteConnector(o.smallAppId,r).then(function(){n("fetchConfigs")})},deleteQuery:function(e,t){var n=e.dispatch,o=e.rootGetters,r=t.connectorId,i=t.queryId;s.a.connectors.deleteQuery(o.smallAppId,r,i).then(function(){n("fetchConfigs")})},fetchAllConnectors:function(e){var t=e.commit;s.a.connectors.getAllConnectors().then(function(e){return t("SET_ALL_CONNECTORS",e)})},fetchConfigs:function(e){var t=e.commit,n=e.rootGetters;return new Promise(function(e,o){s.a.connectors.getEtlConnectors(n.smallAppId,n.stage).then(function(n){t("SET_CONFIGS",n),e(n)},function(e){o(e)})})},fetchUiSchemas:function(e){var t=e.commit;s.a.connectors.getSchemas().then(function(e){for(var n={},o=0,r=Object.entries(e);o<r.length;o++){var s=l(r[o],2),a=s[0],c=s[1],d=c.connectorSchema,u=c.querySchema;d.properties.type.ui={hidden:!0},u.properties.type.ui={hidden:!0},u.properties.name.ui={hidden:!0},u.properties.live_data.ui={label:"Live Data"},u.properties.validation.ui={label:"Validation rules"},n[a]={connector:Object(i.b)(d),query:Object(i.b)(u)}}t("SET_UI_SCHEMAS",n)})},fetchStatus:function(e,t){var n=e.commit,o=t.connectorId,r=t.config;s.a.connectors.getStatus(r).then(function(e){n("SET_STATUS",{connectorId:o,status:e.status})})},updateConnector:function(e,t){var n=e.dispatch,o=e.rootGetters,r=t.connectorId,i=t.config;return new Promise(function(e,t){s.a.connectors.updateConnector(o.smallAppId,r,i).then(function(t){n("fetchConfigs"),e(t)},function(e){t(e)})})},updateQuery:function(e,t){var n=e.dispatch,o=e.rootGetters,r=t.connectorId,i=t.queryId,a=t.config;return new Promise(function(e,t){s.a.connectors.updateQuery(o.smallAppId,r,i,a).then(function(t){n("fetchConfigs").then(function(){e(t)})},function(e){t(e)})})}}},u=n("/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/studio-toolbar/toolbar-links/template.vue.pug"),p=n.n(u)()({name:"toolbar-links",components:{assetExplorer:function(){return Promise.all([n.e("vendors~tc-story-chart-editor~tc-story-debug-panel~tc-story-editor-sheet~tc-story-highlighted-kpi-ed~55b63cfe"),n.e("vendors~data-pipeline~tc-story-chart-editor~tc-story-editor-sheet~tc-story-highlighted-kpi-editor~tc~111530f6"),n.e("vendors~tc-story-chart-editor~tc-story-editor-sheet~tc-story-highlighted-kpi-editor~tc-studio-asset-~e0810d94"),n.e("vendors~code-editor~tc-studio-asset-explorer"),n.e("tc-studio-asset-explorer")]).then(n.bind(null,"/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/small-app/conceptor-tools/assets-explorer/index.coffee"))},colorScheme:function(){return n.e("tc-studio-color-scheme").then(n.bind(null,"/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/small-app/conceptor-tools/color-scheme/index.coffee"))},connectors:function(){return Promise.all([n.e("vendors~tc-story-chart-editor~tc-story-debug-panel~tc-story-editor-sheet~tc-story-highlighted-kpi-ed~55b63cfe"),n.e("vendors~data-pipeline~tc-story-chart-editor~tc-story-editor-sheet~tc-story-highlighted-kpi-editor~tc~111530f6"),n.e("vendors~tc-story-chart-editor~tc-story-editor-sheet~tc-story-highlighted-kpi-editor~tc-studio-asset-~e0810d94"),n.e("vendors~tc-studio-connectors"),n.e("tc-studio-connectors")]).then(n.bind(null,"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/app/scripts/small-app/conceptor-tools/connectors/index.vue 238f90e0a714f757fc45ae07636b3209"))},scheduler:function(){return n.e("tc-studio-scheduler").then(n.bind(null,"/app/node_modules/babel-loader/lib/index.js??ref--7-0!/app/node_modules/coffee-loader/index.js!/app/app/scripts/small-app/conceptor-tools/scheduler/index.coffee"))}},mixins:[r.a.mixin],data:function(){return{isOpened:{},openedDropdown:null,showConnectors:!0}},computed:{isDropdownDataOpened:function(){return"data"===this.openedDropdown},isDropdownHelpOpened:function(){return"help"===this.openedDropdown},isDropdownThemeOpened:function(){return"theme"===this.openedDropdown}},methods:{closeConnectorsInterface:function(){this.$store.unregisterModule("connectors"),this.setSheetOpened("connectors",!1)},closeDropdowns:function(){this.openedDropdown=null},openConnectorsInterface:function(){this.$store.registerModule("connectors",d),this.setSheetOpened("connectors",!0)},openStudioInterface:function(e){this.$store&&window.open(this.$store.getters.routerService.href("small-app.".concat(e),{admin:!0}),"_blank")},setSheetOpened:function(e,t){this.$set(this.isOpened,e,t),this.closeDropdowns()},toggleDropdown:function(e){this.openedDropdown=e===this.openedDropdown?null:e},toolbarButtonClass:function(e){return{active:e===this.openedDropdown}}}});t.a=p},"/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/utils/tc-sheet/index.js":function(e,t,n){"use strict";n.r(t);var o=n("/app/node_modules/babel-loader/lib/index.js??ref--6-0!/app/app/scripts/studio/studio-toolbar/toolbar-links/index.js 06be0a3ba4c213eada90fde10577d579"),r=n("/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/utils/tc-sheet/tc-sheet.vue.pug"),s=n.n(r);t.default=s()({name:"tc-sheet",components:{ToolbarLinks:o.a},props:{hasToolbarLinks:{type:Boolean,default:!0},name:{type:String,default:""}},data:function(){return{index:null}},computed:{spacing:function(){return 5*(this.index+1)},bodyContainerStyle:function(){var e="".concat(this.spacing,"px");return{left:e,top:e,height:"calc(100% - ".concat(e,")")}},canContribute:function(){return this.$store.getters.canContribute},footerStyle:function(){return{height:"".concat(60,"px"),"line-height":"".concat(60,"px")}},isLast:function(){return this.$store.getters.numberOfSheets-1===this.index}},created:function(){var e=this;this.$store.dispatch("addSheet").then(function(t){e.index=t})},mounted:function(){document.querySelector("small-app")?document.querySelector("small-app").appendChild(this.$el):document.querySelector(".small-app-workspace")&&document.querySelector(".small-app-workspace").appendChild(this.$el)},methods:{afterLeave:function(){this.$el.parentElement&&this.$el.parentElement.removeChild(this.$el)},close:function(){this.$emit("closed")}},beforeDestroy:function(){this.$store.dispatch("removeSheet",this.index)},destroyed:function(){var e=this;return this.$el&&this.$el.classList.add("tc-sheet--leave-to"),setTimeout(function(){e.$el&&e.$el.parentElement&&e.$el.parentElement.removeChild(e.$el)},1e3)}})},"/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/studio-toolbar/toolbar-links/template.vue.pug":function(e,t){var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.closeDropdowns,expression:"closeDropdowns"}],staticClass:"toolbar-links"},[n("div",{staticClass:"toolbar-links__button",on:{click:function(t){return e.openStudioInterface("upload-config-files")}}},[e._v("Files")]),n("div",{ref:"dropdownData",staticClass:"toolbar-links__button with-dropdown",class:e.toolbarButtonClass("data"),on:{click:function(t){return t.target!==t.currentTarget?null:e.toggleDropdown("data")}}},[e._v("Data"),e.isDropdownDataOpened?n("div",{staticClass:"dropdown-links"},[e.showConnectors?n("div",{staticClass:"dropdown-links__button",on:{click:e.openConnectorsInterface}},[e._v("Connectors")]):e._e(),n("div",{staticClass:"dropdown-links__button",on:{click:function(t){return e.openStudioInterface("upload-data-source")}}},[e._v("Data sources")]),n("div",{staticClass:"dropdown-links__button",on:{click:function(t){return e.openStudioInterface("data-explorer")}}},[e._v("Data explorer")]),n("div",{staticClass:"dropdown-links__button",on:{click:function(t){return e.setSheetOpened("scheduler",!0)}}},[e._v("Scheduler")])]):e._e()]),n("div",{ref:"dropdownTheme",staticClass:"toolbar-links__button with-dropdown",class:e.toolbarButtonClass("theme"),on:{click:function(t){return t.target!==t.currentTarget?null:e.toggleDropdown("theme")}}},[e._v("Theme"),e.isDropdownThemeOpened?n("div",{staticClass:"dropdown-links"},[n("div",{staticClass:"dropdown-links__button",on:{click:function(t){return e.setSheetOpened("colorScheme",!0)}}},[e._v("Color scheme")]),n("div",{staticClass:"dropdown-links__button",on:{click:function(t){return e.setSheetOpened("assetExplorer",!0)}}},[e._v("Assets")])]):e._e()]),n("div",{ref:"dropdownHelp",staticClass:"toolbar-links__button with-dropdown",class:e.toolbarButtonClass("help"),on:{click:function(t){return t.target!==t.currentTarget?null:e.toggleDropdown("help")}}},[e._v("Help"),e.isDropdownHelpOpened?n("div",{staticClass:"dropdown-links"},[n("a",{staticClass:"dropdown-links__button",attrs:{href:"https://docs.toucantoco.com",target:"_blank"},on:{click:function(t){return e.setSheetOpened("documentation",!0)}}},[e._v("Documentation")]),n("a",{staticClass:"dropdown-links__button",attrs:{href:"https://discourse.toucantoco.com",target:"_blank"},on:{click:function(t){return e.setSheetOpened("onlineSupport",!0)}}},[e._v("Online support")])]):e._e()]),e.isOpened.connectors?n("connectors",{on:{closed:e.closeConnectorsInterface}}):e._e(),e.isOpened.scheduler?n("scheduler",{on:{closed:function(t){return e.setSheetOpened("scheduler",!1)}}}):e._e(),e.isOpened.colorScheme?n("color-scheme",{on:{closed:function(t){return e.setSheetOpened("colorScheme",!1)}}}):e._e(),e.isOpened.assetExplorer?n("assetExplorer",{on:{closed:function(t){return e.setSheetOpened("assetExplorer",!1)}}}):e._e()],1)},o=[];e.exports=function(e){var t="function"==typeof e?e.options:e;return t.render=n,t.staticRenderFns=o,e}},"/app/node_modules/vue-template-loader/lib/template-loader.js??ref--1-oneOf-1-0!/app/node_modules/pug-plain-loader/index.js!/app/app/scripts/studio/utils/tc-sheet/tc-sheet.vue.pug":function(e,t){var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{appear:"",name:"tc-sheet-"},on:{"after-leave":function(t){return e.afterLeave()}}},[n("div",{staticClass:"tc-sheet",class:{"tc-sheet--is-last":e.isLast}},[n("div",{staticClass:"tc-sheet__body-container",style:e.bodyContainerStyle},[e.isLast?n("div",{staticClass:"tc-sheet__close-button",on:{click:function(t){return e.close()}}},[n("i",{staticClass:"fal fa-times"})]):e._e(),n("div",{staticClass:"tc-sheet__body"},[e._t("default")],2)]),n("div",{staticClass:"tc-sheet__footer",style:e.footerStyle},[e._t("footer",[n("div",{staticClass:"studio-toolbar__left-content"},[e._t("footer-left",[e.name?n("div",{staticClass:"studio-toolbar__button tc-sheet__name"},[e._v(e._s(e.name))]):e._e()])],2),e.canContribute?n("div",{staticClass:"studio-toolbar__centered-content"},[e.hasToolbarLinks?n("toolbar-links"):e._e()],1):e._e(),n("div",{staticClass:"studio-toolbar__right-content"},[e._t("footer-right",[e._t("footer-actions")])],2)])],2)])])},o=[];e.exports=function(e){var t="function"==typeof e?e.options:e;return t.render=n,t.staticRenderFns=o,e}}}]);